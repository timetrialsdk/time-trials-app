<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
  <title>Time Trials</title>

  <!-- Firebase SDKs (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body { font-family: 'Orbitron', sans-serif; background: #000; color: #ffb300; padding: 20px; position: relative; overflow-x: hidden; }

    body::before {
      content: "";
      position: fixed;
      inset: -100% -100% -100% -100%;
      background: repeating-linear-gradient(
        135deg,
        rgba(255, 150, 0, 0.32) 0px,
        rgba(255, 150, 0, 0.32) 16px,
        transparent 16px,
        transparent 320px
      );
      pointer-events: none;
      z-index: 1;
    }

    .flag {
      position: fixed;
      width: 180px;
      height: 130px;
      background-size: 36px 36px;
      background-image:
        linear-gradient(45deg, #000 25%, transparent 25%),
        linear-gradient(-45deg, #000 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #000 75%),
        linear-gradient(-45deg, transparent 75%, #000 75%);
      background-position: 0 0, 0 18px, 18px -18px, -18px 0px;
      background-color: #fff;
      opacity: 1;
      pointer-events: none;
      z-index: 1;
    }

    .flag-left { top: 140px; left: 40px; transform: rotate(-18deg); }
    .flag-right { bottom: 40px; right: 40px; transform: rotate(12deg); }

    #home, .route-page { position: relative; z-index: 2; }

    .hero { text-align: center; margin-bottom: 30px; }
    .title {
      font-size: 60px; font-weight: 900; letter-spacing: 6px; text-transform: uppercase;
      color: #ffb300;
      text-shadow: 0 0 3px rgba(255, 179, 0, 0.7), 0 0 6px rgba(255, 140, 0, 0.5);
    }
    .subtitle { font-size: 20px; letter-spacing: 2px; color: #ffb300; }

    .add-route { max-width: 320px; margin: 20px auto; background: #111; padding: 15px; border-radius: 8px; text-align: center; }

    .runs-title {
      text-align: center; font-size: 36px; font-weight: 900; color: #ff3333; margin-bottom: 15px; letter-spacing: 4px;
      text-shadow: 0 0 4px rgba(255,0,0,0.7), 0 0 10px rgba(255,80,80,0.6), 0 0 18px rgba(255,120,120,0.4);
    }

    .routes { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; padding-top: 20px; }

    .route-card {
      background: #111; padding: 15px; border-radius: 8px; width: 260px; cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .route-card:hover { transform: translateY(-6px) scale(1.03); box-shadow: 0 0 18px rgba(255, 180, 0, 0.4); }

    .route-page { position: fixed; inset: 0; background: #000; display: none; overflow-y: auto; padding: 30px; z-index: 1000; }

    .route-container { max-width: 900px; margin: auto; background: #111; padding: 25px; border-radius: 12px; box-shadow: 0 0 30px rgba(0,0,0,0.7); }

    .route-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }

    .back-btn { background: none; border: none; color: #f5c400; font-size: 18px; cursor: pointer; }

    .form-row { display: flex; gap: 8px; margin-bottom: 10px; }

    .form-row input {
      padding: 6px; font-size: 14px; border-radius: 4px; background: #000; color: #ffb300; border: 1px solid #ffb300;
    }

    .name-input { width: 120px; }
    .car-input { width: 120px; }
    .time-input { width: 90px; }
    .video-input { flex: 1; }

    button {
      padding: 6px 10px; background: #222; color: #ffb300; cursor: pointer; border: 1px solid #ffb300; border-radius: 4px;
      transition: transform 0.15s ease, box-shadow 0.15s ease, color 0.15s ease;
    }

    button:hover { transform: scale(1.08); box-shadow: 0 0 10px rgba(255, 180, 0, 0.6); color: #ffd65c; }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
    th, td { border: 1px solid #333; padding: 6px; text-align: center; }
    th { background: #222; color: #ffb300; }

    a { color: #ffb300; }

    .trash { background: none; border: none; cursor: pointer; color: red; font-size: 14px; padding: 2px 4px; }

    .medal { font-size: 20px; }

    .leaderboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 20px; }

    .lb-col h3 { text-align: center; margin-bottom: 15px; text-shadow: 0 0 6px rgba(255,180,0,0.6); }

    .lb-row {
      display: grid; grid-template-columns: 40px 1fr auto; align-items: center; padding: 10px 12px; margin-bottom: 8px;
      background: #111; border: 1px solid #333; border-radius: 6px; transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .lb-row:hover { transform: scale(1.02); box-shadow: 0 0 10px rgba(255,180,0,0.4); }

    .lb-rank { font-weight: bold; color: #ffb300; text-align: center; }
    .lb-name { padding-left: 8px; }
    .lb-value { font-weight: bold; }

    .game-box {
      width: 320px; height: 320px; background: #000; border: 2px solid #ffb300;
      margin: 20px auto; display: flex; justify-content: center; align-items: center;
      box-shadow: 0 0 20px rgba(255,180,0,0.4);
    }

    canvas { background: #000; }
  </style>
</head>
<body>

<!-- LOGIN GATE (NYT ‚Äì INTET ANDET √ÜNDRET) -->
<div id="loginGate" style="
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  text-align: center;
">
  <div style="
    color: #ffb300;
    font-size: 42px;
    font-family: 'Orbitron', sans-serif;
    letter-spacing: 4px;
    text-shadow: 0 0 8px rgba(255,180,0,0.8), 0 0 20px rgba(255,120,0,0.6);
    margin-bottom: 30px;
  ">
    ALLE KAN K√òRE BILEN<br>
    MEN IKKE ALLE HAR RETTET
  </div>

  <input id="passwordInput" type="password" placeholder="Kodeord" style="
    padding: 12px;
    font-size: 18px;
    background: black;
    color: #ffb300;
    border: 2px solid #ffb300;
    border-radius: 6px;
    margin-bottom: 15px;
    text-align: center;
  ">

  <button onclick="checkPassword()">L√ÖS OP</button>

  <div id="loginError" style="color:red; margin-top:10px; display:none;">
    Forkert kodeord
  </div>
</div>

<!-- Racing flags -->
<div class="flag flag-left"></div>
<div class="flag flag-right"></div>

<div id="home">
  <div class="hero">
    <div class="title">TIME TRIALS</div>
    <div class="subtitle">hvis ikke du ryster, var det ikke hurtigt nok</div>
  </div>

  <div class="add-route">
    <h3>Tilf√∏j ny rute</h3>
    <input type="text" id="newRouteName" placeholder="Navn p√• rute" />
    <br>
    <button onclick="addRoute()">Tilf√∏j rute</button><br>
    <button onclick="openLeaderboard()">üèÜ Leaderboard</button><br>
    <button onclick="openGames()">üéÆ Games</button>
  </div>

  <div class="runs-title">RUNS</div>
  <div class="routes" id="routes"></div>
</div>

<div class="route-page" id="leaderboardPage"></div>
<div class="route-page" id="routePage"></div>
<div class="route-page" id="gamesPage"></div>

<script>
// ================= FIREBASE SETUP =================
const firebaseConfig = {
  apiKey: "AIzaSyD0Dj_iZYH37GE5ArCidiTgQ5MLb3jatbE",
  authDomain: "time-trials-b519e.firebaseapp.com",
  projectId: "time-trials-b519e",
  storageBucket: "time-trials-b519e.firebasestorage.app",
  messagingSenderId: "491396428595",
  appId: "1:491396428595:web:627bc61e5cd1b9475fc446"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ================= LOGIN SYSTEM (NYT) =================
const PASSWORD = "AK47-DRIFT-TUNE";

function checkPassword() {
  const input = document.getElementById("passwordInput").value;
  if (input === PASSWORD) {
    localStorage.setItem("access", "true");
    document.getElementById("loginGate").style.display = "none";
  } else {
    document.getElementById("loginError").style.display = "block";
  }
}

window.addEventListener("load", () => {
  if (localStorage.getItem("access") === "true") {
    const gate = document.getElementById("loginGate");
    if (gate) gate.style.display = "none";
  }
});

// ================= DATA (REALTIME FRA FIREBASE) =================
let data = { routes: {} };

db.collection("routes").onSnapshot(snapshot => {
  data.routes = {};
  snapshot.forEach(doc => {
    data.routes[doc.id] = doc.data().runs || [];
  });
  render();
});

// ================= TIME PARSER + REST AF DIN KODE =================

// (ALT RESTEN ER 100% DET SAMME SOM F√òR ‚Äì INTET SLETTET)

</script>

</body>
</html>
